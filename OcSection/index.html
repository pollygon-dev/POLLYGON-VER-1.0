<!DOCTYPE html>
<html>
<head>
     <link rel="stylesheet" href="index.css">
</head>
<body>
    <div class="container">
        <div class="page-border"></div>
        <img src="corner-decoration.svg" alt="" class="corner corner-top-left" />
        <img src="corner-decoration.svg" alt="" class="corner corner-top-right" />
        <img src="corner-decoration.svg" alt="" class="corner corner-bottom-left" />
        <img src="corner-decoration.svg" alt="" class="corner corner-bottom-right" />
        
        <div class="header">
            <h1>The Archive</h1>
            <p>Chronicles of Veldren's Heroes & Citizens</p>
        </div>
        
        <img src="ornamental-divider.svg" alt="" class="section-divider" />

        <div class="filters">
            <div class="filter-section">
                <input type="text" class="search-bar" placeholder="Search chronicles...">
            </div>
            
            <div class="filter-section">
                <div class="filter-title">Element</div>
                <div class="filter-group">
                    <button class="filter-button active">All</button>
                    <button class="filter-button fire">Fire</button>
                    <button class="filter-button water">Water</button>
                    <button class="filter-button earth">Earth</button>
                    <button class="filter-button wind">Wind</button>
                    <button class="filter-button light">Light</button>
                    <button class="filter-button dark">Dark</button>
                </div>
            </div>

            <div class="filter-section">
                <div class="filter-title">Region</div>
                <div class="filter-group">
                    <button class="filter-button active">All</button>
                    <button class="filter-button">Kingdom of Herad</button>
                    <button class="filter-button">Neadi</button>
                    <button class="filter-button">Andaros</button>
                    <button class="filter-button">Everwatch</button>
                    <button class="filter-button">Filenore</button>
                    <button class="filter-button">Kingdom of Granvelle</button>
                    <button class="filter-button">Selina</button>
                    <button class="filter-button">Solia</button>
                    <button class="filter-button">Stillmoor</button>
                </div>
            </div>
        </div>

        <img src="ornamental-divider.svg" alt="" class="section-divider" />
        
        <div class="character-grid">
            <a href="ocs/noah/noah.html" target="_blank">
                <div class="character-card water ornamental-border">
                    <div class="element-corner">
                        <img alt="Element" class="element-corner-icon">
                    </div>
                    <div class="character-image-container">
                        <img src="portrait/noah.png" alt="Character" class="character-image">
                    </div>
                    <div class="character-info">
                        <h3 class="character-name">Noah</h3>
                        <div class="character-location">Filenore</div>
                        <div class="character-details">
                            <div class="element-icon">
                                <span class="icon"></span>
                                <span class="element-name">Water</span>
                            </div>
                        </div>
                    </div>
                </div>
            </a>

            <a href="ocs/jean/jean.html" target="_blank">
                <div class="character-card wind ornamental-border">
                    <div class="element-corner">
                        <img alt="Element" class="element-corner-icon">
                    </div>
                    <div class="character-image-container">
                        <img src="portrait/jean.png" alt="Character" class="character-image">
                    </div>
                    <div class="character-info">
                        <h3 class="character-name">Jean</h3>
                        <div class="character-location">Kingdom of Herad</div>
                        <div class="character-details">
                            <div class="element-icon">
                                <span class="icon"></span>
                                <span class="element-name">Wind</span>
                            </div>
                        </div>
                    </div>
                </div>
            </a>

            <a href="ocs/alice/alice.html" target="_blank">
                <div class="character-card fire ornamental-border">
                    <div class="element-corner">
                        <img alt="Element" class="element-corner-icon">
                    </div>
                    <div class="character-image-container">
                        <img src="portrait/alice.png" alt="Character" class="character-image">
                    </div>
                    <div class="character-info">
                        <h3 class="character-name">Alice</h3>
                        <div class="character-location">Kingdom of Granvelle</div>
                        <div class="character-details">
                            <div class="element-icon">
                                <span class="icon"></span>
                                <span class="element-name">Fire</span>
                            </div>
                        </div>
                    </div>
                </div>
            </a>

            <a href="ocs/hal/hal.html" target="_blank">
                <div class="character-card wind ornamental-border">
                    <div class="element-corner">
                        <img alt="Element" class="element-corner-icon">
                    </div>
                    <div class="character-image-container">
                        <img src="portrait/hal.png" alt="Character" class="character-image">
                    </div>
                    <div class="character-info">
                        <h3 class="character-name">Hal</h3>
                        <div class="character-location">Neadi</div>
                        <div class="character-details">
                            <div class="element-icon">
                                <span class="icon"></span>
                                <span class="element-name">Wind</span>
                            </div>
                        </div>
                    </div>
                </div>
            </a>

            <a href="ocs/courier/courier.html" target="_blank">
                <div class="character-card earth ornamental-border">
                    <div class="element-corner">
                        <img alt="Element" class="element-corner-icon">
                    </div>
                    <div class="character-image-container">
                        <img src="portrait/courier.png" alt="Character" class="character-image">
                    </div>
                    <div class="character-info">
                        <h3 class="character-name">Courier</h3>
                        <div class="character-location">Stillmoor</div>
                        <div class="character-details">
                            <div class="element-icon">
                                <span class="icon"></span>
                                <span class="element-name">Earth</span>
                            </div>
                        </div>
                    </div>
                </div>
            </a>

            <a href="ocs/julian/julian.html" target="_blank">
                <div class="character-card light ornamental-border">
                    <div class="element-corner">
                        <img alt="Element" class="element-corner-icon">
                    </div>
                    <div class="character-image-container">
                        <img src="portrait/julian.png" alt="Character" class="character-image">
                    </div>
                    <div class="character-info">
                        <h3 class="character-name">Julian</h3>
                        <div class="character-location">Stillmoor</div>
                        <div class="character-details">
                            <div class="element-icon">
                                <span class="icon"></span>
                                <span class="element-name">Light</span>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <script>
        // Element Icons
        const ELEMENT_ICONS = {
            fire: './elements/2.png',
            water: './elements/3.png',
            earth: './elements/4.png',
            wind: './elements/5.png',
            light: './elements/6.png',
            dark: './elements/7.png'
        };

        document.addEventListener('DOMContentLoaded', function() {
            // Set up element icons
            const elementIcons = document.querySelectorAll('.element-icon .icon');
            const elementCorners = document.querySelectorAll('.element-corner img');
            
            // Function to get element type from card
            const getElementType = (card) => {
                return card.classList.toString().match(/fire|water|earth|wind|light|dark/i)?.[0] || '';
            };

            // Set up bottom icons
            elementIcons.forEach(icon => {
                const card = icon.closest('.character-card');
                const element = getElementType(card);
                if (element && ELEMENT_ICONS[element.toLowerCase()]) {
                    icon.style.backgroundImage = `url('${ELEMENT_ICONS[element.toLowerCase()]}')`;
                    icon.style.backgroundSize = 'contain';
                    icon.style.backgroundRepeat = 'no-repeat';
                    icon.style.backgroundPosition = 'center';
                    icon.style.border = 'none';
                }
            });

            // Set up corner icons
            elementCorners.forEach(corner => {
                const card = corner.closest('.character-card');
                const element = getElementType(card);
                if (element && ELEMENT_ICONS[element.toLowerCase()]) {
                    corner.src = ELEMENT_ICONS[element.toLowerCase()];
                }
            });

            // Track active filters
            let activeElement = 'All';
            let activeRegion = 'All';

            // Filter buttons
            const filterButtons = document.querySelectorAll('.filter-button');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Find siblings within the same filter group
                    const group = this.closest('.filter-group');
                    const groupButtons = group.querySelectorAll('.filter-button');
                    
                    // Toggle active state within group
                    groupButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');

                    // Update active filters
                    if (group.previousElementSibling.textContent === 'Element') {
                        activeElement = this.textContent;
                    } else if (group.previousElementSibling.textContent === 'Region') {
                        activeRegion = this.textContent;
                    }

                    // Apply filters
                    filterCards();
                });
            });

            // Search functionality
            const searchBar = document.querySelector('.search-bar');
            searchBar.addEventListener('input', filterCards);

            // Combined filtering function
            function filterCards() {
                const cards = document.querySelectorAll('.character-card');
                const searchTerm = searchBar.value.toLowerCase();

                cards.forEach(card => {
                    const cardLink = card.closest('a');
                    const name = card.querySelector('.character-name').textContent.toLowerCase();
                    const location = card.querySelector('.character-location').textContent.toLowerCase();
                    const element = card.classList.toString().match(/fire|water|earth|wind|light|dark/i)?.[0] || '';

                    // Check if card matches all active filters
                    const matchesSearch = name.includes(searchTerm) || location.includes(searchTerm);
                    const matchesElement = activeElement === 'All' || element.toLowerCase() === activeElement.toLowerCase();
                    const matchesRegion = activeRegion === 'All' || location.includes(activeRegion.toLowerCase());

                    // Show/hide card by modifying the display of the parent anchor tag
                    if (matchesSearch && matchesElement && matchesRegion) {
                        cardLink.style.display = 'block';
                    } else {
                        cardLink.style.display = 'none';
                    }
                });
            }
        });
    </script>
</body>
</html>